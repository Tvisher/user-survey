(function(){"use strict";var e={3919:function(e,t,s){var n=s(3396),a=s(9242),i=s(7139);const o={key:0},r={class:"polls-container"},l={class:"polls-pagination"},p={class:"polls-pagination__wrapper"},d=["onClick"],c={key:0,class:"polls-pagination next-btn-wrapper"},u={class:"polls-pagination__wrapper"},g=(0,n._)("div",{class:"quiz-app__footer"},[(0,n._)("div",{class:"quiz-app__footer-content"},[(0,n._)("div",{class:"quiz-app__footer-text"},"Создано в"),(0,n._)("div",{class:"quiz-app__footer-logo"})])],-1);function m(e,t,s,m,h,w){const I=(0,n.up)("app-start-page"),v=(0,n.up)("app-survey-page"),f=(0,n.up)("app-end-page");return e.appDataLoaded?((0,n.wg)(),(0,n.iD)("div",o,[(0,n._)("div",r,[(0,n.Wm)(I,{appSettings:e.appSettings},null,8,["appSettings"]),(0,n._)("div",l,[(0,n._)("div",p,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.surveyQuestionsPages,((t,s)=>((0,n.wg)(),(0,n.iD)("div",{class:(0,i.C_)(["polls-page-btn",{active:t.id===e.getCurrentPage.id&&h.showQuestions}]),key:t.id,onClick:e=>w.setPage(t.id)},(0,i.zw)(s+1),11,d)))),128)),e.surveyСompleted?((0,n.wg)(),(0,n.iD)("div",{key:0,class:(0,i.C_)(["app-btn btn end-page-btn",{active:h.showEndPage}]),onClick:t[0]||(t[0]=(...e)=>w.selectEndPage&&w.selectEndPage(...e))}," Итоговая страницца ",2)):(0,n.kq)("",!0)])]),(0,n.Wm)(a.uT,{name:"fade",mode:"out-in"},{default:(0,n.w5)((()=>[h.showQuestions?((0,n.wg)(),(0,n.iD)("div",{key:e.getCurrentPage.id},[(0,n.Wm)(v,{pageData:e.getCurrentPage},null,8,["pageData"]),e.surveyСompleted?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",c,[(0,n._)("div",u,[(0,n._)("button",{class:"app-btn btn",onClick:t[1]||(t[1]=(...e)=>w.nextPageOrFinish&&w.nextPageOrFinish(...e))},(0,i.zw)(w.nextBtnText),1)])]))])):(0,n.kq)("",!0)])),_:1}),(0,n.Wm)(a.uT,{name:"fade",mode:"out-in"},{default:(0,n.w5)((()=>[h.showEndPage?((0,n.wg)(),(0,n.j4)(f,{key:0,appSettings:e.appSettings},null,8,["appSettings"])):(0,n.kq)("",!0)])),_:1})]),g])):(0,n.kq)("",!0)}var h=s(4161);const w={class:"page-description"};function I(e,t,s,a,o,r){const l=(0,n.up)("app-poll-element");return(0,n.wg)(),(0,n.iD)("div",{class:(0,i.C_)(["poll-pages",{pageIsBlocked:r.pageIsBlocked}])},[(0,n._)("p",w,(0,i.zw)(s.pageData.pageComment),1),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.pagePollList,((e,t)=>((0,n.wg)(),(0,n.j4)(l,{pollNumber:t,key:e.id,pollItemId:e.id,pollItemType:e.type,pollItemName:e.typeName,pollItemData:e.data,class:(0,i.C_)({pageIsBlocked:r.pageIsBlocked})},null,8,["pollNumber","pollItemId","pollItemType","pollItemName","pollItemData","class"])))),128))],2)}const v={class:"poll-item__head"},f={class:"poll-item__head-wrapper"},y={class:"poll-item__name"},D={class:"poll-item__num"},b={class:"poll-item__title"},_={key:0,class:"empty-error"};function A(e,t,s,a,o,r){const l=(0,n.up)("app-visual-poll-body");return(0,n.wg)(),(0,n.iD)("div",{class:(0,i.C_)(["poll-item",{questionEmptyAnswer:r.showError}])},[(0,n._)("div",v,[(0,n._)("div",f,[(0,n._)("div",y,[(0,n._)("div",D,(0,i.zw)(r.indexNumber),1),(0,n._)("div",b,(0,i.zw)(s.pollItemName),1)])])]),(0,n.Wm)(l,{pollItemId:s.pollItemId,pollItemType:s.pollItemType,pollItemData:s.pollItemData},null,8,["pollItemId","pollItemType","pollItemData"]),r.showError?((0,n.wg)(),(0,n.iD)("span",_," Необходимо ответить на вопрос ")):(0,n.kq)("",!0)],2)}const C={class:"poll-body"},k=(0,n._)("hr",null,null,-1),L=["src","alt"];function S(e,t,s,a,o,r){const l=(0,n.up)("app-text-from-editor"),p=(0,n.up)("app-single-choise-variant"),d=(0,n.up)("app-multi-choise-variant"),c=(0,n.up)("app-single-select"),u=(0,n.up)("app-multi-select"),g=(0,n.up)("app-range-slider"),m=(0,n.up)("app-ranging-visual"),h=(0,n.up)("app-datapicker-visual"),w=(0,n.up)("app-custom-fields-visual");return(0,n.wg)(),(0,n.iD)("div",C,[k,r.isHasImageInPoll?((0,n.wg)(),(0,n.iD)("div",{key:0,class:(0,i.C_)(["poll-body__image-block",r.imagePositionType])},[(0,n._)("img",{src:s.pollItemData.pollImage.path,alt:s.pollItemData.pollImage.name},null,8,L)],2)):(0,n.kq)("",!0),(0,n.Wm)(l,{editorValue:s.pollItemData.editorValue},null,8,["editorValue"]),"single-choice"===s.pollItemType?((0,n.wg)(),(0,n.j4)(p,{key:1,optionsData:s.pollItemData.optionsData,pollItemId:s.pollItemId},null,8,["optionsData","pollItemId"])):(0,n.kq)("",!0),"multiple-choice"===s.pollItemType?((0,n.wg)(),(0,n.j4)(d,{key:2,optionsData:s.pollItemData.optionsData,pollItemId:s.pollItemId},null,8,["optionsData","pollItemId"])):(0,n.kq)("",!0),"drop-down-list"===s.pollItemType?((0,n.wg)(),(0,n.j4)(c,{key:3,optionsData:s.pollItemData.optionsData,pollItemId:s.pollItemId},null,8,["optionsData","pollItemId"])):(0,n.kq)("",!0),"multiple-drop-down-list"===s.pollItemType?((0,n.wg)(),(0,n.j4)(u,{key:4,optionsData:s.pollItemData.optionsData,pollItemId:s.pollItemId},null,8,["optionsData","pollItemId"])):(0,n.kq)("",!0),"range-selection"===s.pollItemType?((0,n.wg)(),(0,n.j4)(g,{key:5,rangeData:s.pollItemData.rangeData,pollItemId:s.pollItemId},null,8,["rangeData","pollItemId"])):(0,n.kq)("",!0),"ranging"===s.pollItemType?((0,n.wg)(),(0,n.j4)(m,{key:6,optionsData:s.pollItemData.optionsData,pollItemId:s.pollItemId},null,8,["optionsData","pollItemId"])):(0,n.kq)("",!0),"date"===s.pollItemType?((0,n.wg)(),(0,n.j4)(h,{key:7,dateData:s.pollItemData.dateData,pollItemId:s.pollItemId},null,8,["dateData","pollItemId"])):(0,n.kq)("",!0),"custom-fields"===s.pollItemType?((0,n.wg)(),(0,n.j4)(w,{key:8,optionsData:s.pollItemData.optionsData,pollItemId:s.pollItemId},null,8,["optionsData","pollItemId"])):(0,n.kq)("",!0)])}const O=["innerHTML"];function x(e,t,s,a,i,o){return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",{class:"poll-item__answer",innerHTML:o.deltaToHtml},null,8,O)])}var P=s(7412),q={props:{editorValue:{type:Object}},computed:{deltaToHtml(){const e=this.editorValue.ops,t=new P.bc(e,{});return t.convert()}}},V=s(89);const T=(0,V.Z)(q,[["render",x]]);var F=T;const z={class:"single-choise-visual"},j=["checked","name","onInput"],M={class:"single-choise-visual__text"};function N(e,t,s,a,o,r){return(0,n.wg)(),(0,n.iD)("div",z,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.optionsData.optionsList,(e=>((0,n.wg)(),(0,n.iD)("label",{class:(0,i.C_)(["single-choise-visual__label",{checked:e.id===o.checkedInputId,current:e.id===r.correctAnswerId}]),key:e.id},[(0,n._)("input",{class:"single-choise-visual__input",type:"radio",checked:e.id===o.checkedInputId,name:s.pollItemId,onInput:t=>r.getChecket(e.id)},null,40,j),(0,n._)("p",M,(0,i.zw)(e.value),1)],2)))),128))])}var E=s(65),U={props:{optionsData:Object,pollItemId:String},data(){return{checkedInputId:""}},computed:{...(0,E.rn)({showCurrentAnswer:e=>e.showCurrentAnswer}),...(0,E.Se)(["getCurrentAnswer"]),correctAnswerId(){return this.optionsData.currentAnswerId.length<1||!0===!this.showCurrentAnswer?null:this.optionsData.currentAnswerId[0]}},methods:{...(0,E.OI)(["setUserAnswer"]),getChecket(e){this.checkedInputId=e,this.setUserAnswer({questionId:this.pollItemId,userAnswer:e})}},beforeMount(){this.getCurrentAnswer(this.pollItemId).length>0&&(this.checkedInputId=this.getCurrentAnswer(this.pollItemId)[0])}};const Z=(0,V.Z)(U,[["render",N]]);var Q=Z;const H={class:"multiple-choise-visual"},$=["name","checked","onInput"],B={class:"single-choise-visual__text"};function W(e,t,s,a,o,r){return(0,n.wg)(),(0,n.iD)("div",H,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.optionsData.optionsList,(e=>((0,n.wg)(),(0,n.iD)("label",{class:(0,i.C_)(["single-choise-visual__label",{checked:o.checkedInputs.includes(e.id),correct:r.correctAnswerId.includes(e.id)}]),key:e.id},[(0,n._)("input",{class:"single-choise-visual__input",type:"checkbox",name:s.pollItemId,checked:o.checkedInputs.includes(e.id),onInput:t=>r.getChecket(t,e.id)},null,40,$),(0,n._)("p",B,(0,i.zw)(e.value),1)],2)))),128))])}s(7658);var Y={props:{optionsData:Object,pollItemId:String},data(){return{checkedInputs:[]}},computed:{...(0,E.rn)({showCurrentAnswer:e=>e.showCurrentAnswer}),...(0,E.Se)(["getCurrentAnswer"]),hasCorrectAnswer(){return this.optionsData.currentAnswerId.length>0&&!0===this.showCurrentAnswer},correctAnswerId(){return this.hasCorrectAnswer?this.optionsData.currentAnswerId:[]}},methods:{...(0,E.OI)(["setUserAnswer"]),getChecket(e,t){const s=e.target.checked;s?this.checkedInputs.push(t):this.checkedInputs=this.checkedInputs.filter((e=>e!==t)),this.setUserAnswer({questionId:this.pollItemId,userAnswer:[...this.checkedInputs]})}},beforeMount(){this.getCurrentAnswer(this.pollItemId).length>0&&(this.checkedInputs=[...this.getCurrentAnswer(this.pollItemId)])}};const R=(0,V.Z)(Y,[["render",W]]);var G=R;function K(e,t,s,a,o,r){const l=(0,n.up)("v-select");return(0,n.wg)(),(0,n.j4)(l,{class:(0,i.C_)(r.isCorretnAnswer),options:o.optionsListForSelect,reduce:e=>e.id,modelValue:o.selectedOptionId,"onUpdate:modelValue":t[0]||(t[0]=e=>o.selectedOptionId=e),placeholder:o.placeholder,"append-to-body":"","calculate-position":r.withPopper},{"no-options":(0,n.w5)((()=>[(0,n.Uk)(" Ничего не найдено ")])),_:1},8,["class","options","reduce","modelValue","placeholder","calculate-position"])}var J=s(3910),X={data(){return{selectedOptionId:"",placeholder:"Выберите один из вариантов ответа",placement:"bottom",optionsListForSelect:[]}},props:{optionsData:{type:Object},pollItemId:{type:String}},computed:{...(0,E.rn)({showCurrentAnswer:e=>e.showCurrentAnswer}),...(0,E.Se)(["getCurrentAnswer"]),isCorretnAnswer(){if(this.optionsData.currentAnswerId.length>0&&this.showCurrentAnswer)return this.optionsData.currentAnswerId==this.selectedOptionId?"correct":"uncorrect"}},methods:{withPopper(e,t,{width:s}){e.style.width=s;const n=(0,J.fi)(t.$refs.toggle,e,{placement:this.placement,modifiers:[{name:"offset",options:{offsetX:[0,-1]}},{name:"toggleClass",enabled:!0,phase:"write",fn({state:e}){t.$el.classList.toggle("drop-up","top"===e.placement)}}]});return()=>n.destroy()},...(0,E.OI)(["setUserAnswer"])},watch:{selectedOptionId(){const e=this.selectedOptionId?this.selectedOptionId:[];this.setUserAnswer({questionId:this.pollItemId,userAnswer:e})}},beforeMount(){this.optionsListForSelect=this.optionsData.optionsList.reduce(((e,t)=>{const s={label:t.value,id:t.id};return e.push(s),e}),[]),this.getCurrentAnswer(this.pollItemId).length>0&&(this.selectedOptionId=this.getCurrentAnswer(this.pollItemId)[0])}};const ee=(0,V.Z)(X,[["render",K]]);var te=ee;function se(e,t,s,a,i,o){const r=(0,n.up)("v-select");return(0,n.wg)(),(0,n.iD)("div",{ref:`${s.pollItemId}-multiSelectComponent`},[(0,n.Wm)(r,{class:"multi-select",multiple:"",pushTags:!0,options:i.optionsListForSelect,reduce:e=>e.id,modelValue:i.selectedOptionId,"onUpdate:modelValue":t[0]||(t[0]=e=>i.selectedOptionId=e),placeholder:i.placeholder,"append-to-body":"","calculate-position":o.withPopper},{"no-options":(0,n.w5)((()=>[(0,n.Uk)(" Ничего не найдено ")])),_:1},8,["options","reduce","modelValue","placeholder","calculate-position"])],512)}var ne={data(){return{selectedOptionId:[],placeholder:"Выберите один или несколько вариантов ответа",placement:"bottom",optionsListForSelect:[]}},props:{optionsData:{type:Object},pollItemId:{type:String}},computed:{...(0,E.rn)({showCurrentAnswer:e=>e.showCurrentAnswer}),...(0,E.Se)(["getCurrentAnswer"])},methods:{withPopper(e,t,{width:s}){e.style.width=s;const n=(0,J.fi)(t.$refs.toggle,e,{placement:this.placement,modifiers:[{name:"offset",options:{offsetX:[0,-1]}},{name:"toggleClass",enabled:!0,phase:"write",fn({state:e}){t.$el.classList.toggle("drop-up","top"===e.placement)}}]});return()=>n.destroy()},...(0,E.OI)(["setUserAnswer"])},watch:{selectedOptionId(){this.setUserAnswer({questionId:this.pollItemId,userAnswer:[...this.selectedOptionId]})}},beforeMount(){this.optionsListForSelect=this.optionsData.optionsList.reduce(((e,t)=>{const s={label:t.value,id:t.id};return e.push(s),e}),[])},mounted(){this.getCurrentAnswer(this.pollItemId).length>0&&(this.selectedOptionId=[...this.getCurrentAnswer(this.pollItemId)],(0,n.Y3)().then((()=>{if(this.optionsData.currentAnswerId.length>0){const e=this.optionsListForSelect.filter((e=>{if(this.optionsData.currentAnswerId.includes(e.id))return e})).map((e=>e.label.toLowerCase())),t=this.$refs[`${this.pollItemId}-multiSelectComponent`],s=t.querySelectorAll(".vs__selected");s.forEach((t=>{const s=t.textContent.toLowerCase();e.includes(s)?t.classList.add("correct"):t.classList.add("uncorrect")}))}})))}};const ae=(0,V.Z)(ne,[["render",se]]);var ie=ae;const oe={class:"range-slider-visual"},re={class:"range-slider__min"},le={class:"range-slider__max"};function pe(e,t,s,a,o,r){const l=(0,n.up)("Slider");return(0,n.wg)(),(0,n.iD)("div",oe,[(0,n._)("div",re,(0,i.zw)(this.rangeData.min),1),(0,n.Wm)(l,{modelValue:e.defaultValues,"onUpdate:modelValue":t[0]||(t[0]=t=>e.defaultValues=t),min:r.minToSlider,max:r.maxToSlider,direction:r.sliderDirection},null,8,["modelValue","min","max","direction"]),(0,n._)("div",le,(0,i.zw)(this.rangeData.max),1)])}var de=s(9661),ce={components:{Slider:de.Z},props:{rangeData:Object,pollItemId:String},data:()=>({defaultValues:[0,0]}),computed:{...(0,E.Se)(["getCurrentAnswer"]),sliderDirection(){return this.rangeData.max>this.rangeData.min?"ltr":"rtl"},minToSlider(){return"ltr"===this.sliderDirection?this.strToNum(this.rangeData.min):this.strToNum(this.rangeData.max)},maxToSlider(){return"ltr"===this.sliderDirection?this.strToNum(this.rangeData.max):this.strToNum(this.rangeData.min)}},methods:{...(0,E.OI)(["setUserAnswer"]),strToNum(e){return+String(e).replace(/[^0-9]/g,"")}},beforeMount(){let e="ltr"===this.sliderDirection?this.rangeData.defaultMin:this.rangeData.defaultMax,t="ltr"===this.sliderDirection?this.rangeData.defaultMax:this.rangeData.defaultMin;e=this.strToNum(e),t=this.strToNum(t),this.defaultValues=[e,t],this.getCurrentAnswer(this.pollItemId).length>0&&(this.defaultValues[0]=this.getCurrentAnswer(this.pollItemId)[0].start,this.defaultValues[1]=this.getCurrentAnswer(this.pollItemId)[0].end)},watch:{defaultValues(){this.setUserAnswer({questionId:this.pollItemId,userAnswer:[{start:this.defaultValues[0],end:this.defaultValues[1]}]})}}};const ue=(0,V.Z)(ce,[["render",pe]]);var ge=ue;const me=e=>((0,n.dD)("data-v-51339a9c"),e=e(),(0,n.Cn)(),e),he={class:"rangin-visual"},we={class:"rangin-visual__content"},Ie=me((()=>(0,n._)("div",{class:"rangin-visual__dragg"},[(0,n._)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,n._)("path",{d:"M12 4.00003C13.1046 4.00003 14 3.10459 14 2.00002C14 0.895438 13.1046 0 12 0C10.8954 0 10 0.895438 10 2.00002C10 3.10459 10.8954 4.00003 12 4.00003Z",fill:"#C2CFE0"}),(0,n._)("path",{d:"M12 14C13.1046 14 14 13.1046 14 12C14 10.8954 13.1046 10 12 10C10.8954 10 10 10.8954 10 12C10 13.1046 10.8954 14 12 14Z",fill:"#C2CFE0"}),(0,n._)("path",{d:"M12 24.0001C13.1046 24.0001 14 23.1046 14 22C14 20.8954 13.1046 20 12 20C10.8954 20 10 20.8954 10 22C10 23.1046 10.8954 24.0001 12 24.0001Z",fill:"#C2CFE0"})])],-1))),ve={class:"rangin-visual__num"},fe={class:"rangin-visual__text"},ye={class:"rangin-visual__btns"},De=["onClick"],be=me((()=>(0,n._)("svg",{width:"33",height:"33",viewBox:"0 0 33 33",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,n._)("path",{d:"M11.4138 20.586H22.5858C22.7836 20.586 22.9769 20.5273 23.1413 20.4174C23.3057 20.3075 23.4339 20.1514 23.5095 19.9687C23.5852 19.786 23.605 19.5849 23.5664 19.391C23.5279 19.197 23.4327 19.0189 23.2928 18.879L17.7068 13.293C17.5193 13.1056 17.265 13.0002 16.9998 13.0002C16.7347 13.0002 16.4804 13.1056 16.2928 13.293L10.7068 18.879C10.567 19.0189 10.4718 19.197 10.4333 19.391C10.3947 19.5849 10.4145 19.786 10.4902 19.9687C10.5658 20.1514 10.694 20.3075 10.8584 20.4174C11.0228 20.5273 11.2161 20.586 11.4138 20.586Z",fill:"#868DA4"}),(0,n._)("rect",{x:"1",y:"1",width:"31",height:"31",rx:"7",stroke:"#868DA4","stroke-width":"2"})],-1))),_e=[be],Ae=["onClick"],Ce=me((()=>(0,n._)("svg",{width:"33",height:"33",viewBox:"0 0 33 33",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,n._)("path",{d:"M11.4138 14H22.5858C22.7836 14 22.9769 14.0587 23.1413 14.1686C23.3057 14.2785 23.4339 14.4346 23.5095 14.6173C23.5852 14.8 23.605 15.0011 23.5664 15.195C23.5279 15.389 23.4327 15.5671 23.2928 15.707L17.7068 21.293C17.5193 21.4805 17.265 21.5858 16.9998 21.5858C16.7347 21.5858 16.4804 21.4805 16.2928 21.293L10.7068 15.707C10.567 15.5671 10.4718 15.389 10.4333 15.195C10.3947 15.0011 10.4145 14.8 10.4902 14.6173C10.5658 14.4346 10.694 14.2785 10.8584 14.1686C11.0228 14.0587 11.2161 14 11.4138 14Z",fill:"#868DA4"}),(0,n._)("rect",{x:"1",y:"1",width:"31",height:"31",rx:"7",stroke:"#868DA4","stroke-width":"2"})],-1))),ke=[Ce];function Le(e,t,s,o,r,l){const p=(0,n.up)("draggable");return(0,n.wg)(),(0,n.iD)("div",he,[(0,n.Wm)(p,(0,n.dG)({modelValue:r.optionsList,"onUpdate:modelValue":t[0]||(t[0]=e=>r.optionsList=e)},l.pollItemsDragOptionsInSidebar,{handle:".rangin-visual__content",onStart:t[1]||(t[1]=e=>r.isDraggingOption=!0),onEnd:t[2]||(t[2]=e=>r.isDraggingOption=!1)}),{default:(0,n.w5)((()=>[(0,n.Wm)(a.W3,{type:"transition",name:r.isDraggingOption?"flip-option-list":"fade-range"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.optionsList,((t,s)=>((0,n.wg)(),(0,n.iD)("div",{class:(0,i.C_)(["rangin-visual__item",{correct:e.showCurrentAnswer&&l.correctOrderId[s]==t.id,wrong:e.showCurrentAnswer&&l.correctOrderId[s]!=t.id}]),key:t.id},[(0,n._)("div",we,[Ie,(0,n._)("div",ve,(0,i.zw)(s+1),1),(0,n._)("div",fe,(0,i.zw)(t.value),1)]),(0,n._)("div",ye,[(0,n._)("div",{class:"rangin-visual__top-btn",onClick:e=>l.rangeVariant(s,"top")},_e,8,De),(0,n._)("div",{class:"rangin-visual__bottom-btn",onClick:e=>l.rangeVariant(s,"bottom")},ke,8,Ae)])],2)))),128))])),_:1},8,["name"])])),_:1},16,["modelValue"])])}var Se=s(8249),Oe={components:{draggable:Se.J},props:{optionsData:{type:Object},pollItemId:{type:String}},data(){return{optionsList:[],isDraggingOption:!1}},computed:{...(0,E.rn)({showCurrentAnswer:e=>e.showCurrentAnswer}),...(0,E.Se)(["getCurrentAnswer"]),pollItemsDragOptionsInSidebar(){return{animation:200,group:`rangeGroup-${this.pollItemId}`,scrollSensitivity:200,forceFallback:!0,disabled:!1,ghostClass:"ghost-potion",sort:!0}},correctOrder(){return this.optionsList.every(((e,t)=>e.id==this.optionsData.optionsList[t].id))},correctOrderId(){return this.optionsData.optionsList.map((e=>e.id))}},methods:{...(0,E.OI)(["setUserAnswer"]),rangeVariant(e,t){let s;function n(e,t,s){const n=e[t];e[t]=e[s],e[s]=n}"bottom"==t&&(s=e===this.optionsList.length-1?0:e+1),"top"==t&&(s=0===e?this.optionsList.length-1:e-1),n(this.optionsList,e,s)}},watch:{optionsList(e,t){if(t.length>0){const t=e.map((e=>e.id));this.setUserAnswer({questionId:this.pollItemId,userAnswer:[...t]})}}},beforeMount(){if(this.getCurrentAnswer(this.pollItemId).length>0){const e=this.getCurrentAnswer(this.pollItemId).map((e=>this.optionsData.optionsList.find((t=>t.id===e))));this.optionsList=[...e]}const e=()=>{this.optionsList=[...this.optionsData.optionsList].sort((()=>Math.random()-.5))};while(this.correctOrder)e()}};const xe=(0,V.Z)(Oe,[["render",Le],["__scopeId","data-v-51339a9c"]]);var Pe=xe;function qe(e,t,s,a,i,o){const r=(0,n.up)("VueDatePicker");return(0,n.wg)(),(0,n.j4)(r,{locale:"ru","auto-apply":!0,"enable-time-picker":!1,range:o.isRangeDatapicker,modelValue:i.date,"onUpdate:modelValue":t[0]||(t[0]=e=>i.date=e),format:"dd.MM.yyyy",placeholder:o.getCurrentDate},null,8,["range","modelValue","format","placeholder"])}var Ve=s(393),Te={components:{VueDatePicker:Ve.Z},props:{dateData:{type:Object},pollItemId:String},data(){return{date:null}},computed:{...(0,E.Se)(["getCurrentAnswer"]),isRangeDatapicker(){return this.dateData.range},getCurrentDate(){const e=new Date,t=String(e.getDate()).padStart(2,"0"),s=String(e.getMonth()+1).padStart(2,"0"),n=e.getFullYear();return`${t}.${s}.${n}`}},methods:{...(0,E.OI)(["setUserAnswer"])},watch:{date(){const e=this.date?[this.date]:[];this.setUserAnswer({questionId:this.pollItemId,userAnswer:e})}},beforeMount(){this.getCurrentAnswer(this.pollItemId).length>0&&(this.date=this.getCurrentAnswer(this.pollItemId)[0])}};const Fe=(0,V.Z)(Te,[["render",qe]]);var ze=Fe;const je={class:"editor-descr"},Me={key:0,class:"variant-item__label"},Ne=["value","onAccept"],Ee=(0,n._)("span",{class:"err-mess"},"Необходимо запонить это поле",-1),Ue={key:1,class:"variant-item__label"},Ze=["value","placeholder","onInput"],Qe=(0,n._)("span",{class:"err-mess"},"Необходимо запонить это поле",-1),He={key:2,class:"variant-item__label"},$e=["value","placeholder","onInput"],Be=(0,n._)("span",{class:"err-mess"},"Необходимо запонить это поле",-1),We={key:3,class:"variant-item__label"},Ye=["value","placeholder","onInput"],Re=(0,n._)("span",{class:"err-mess"},"Необходимо запонить это поле",-1);function Ge(e,t,s,a,o,r){const l=(0,n.Q2)("imask");return(0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.customFields,((s,a)=>((0,n.wg)(),(0,n.iD)("div",{class:(0,i.C_)(["custom-field-item",{"error-field":!s.filled&&e.getValidate}]),key:s.id},[(0,n._)("span",je,(0,i.zw)(s.value||`Поле № ${a+1}`),1),"phone"===s.type?((0,n.wg)(),(0,n.iD)("label",Me,[(0,n.wy)((0,n._)("input",{class:"variant-item__filed",value:s.answer,onAccept:e=>r.onAcceptPhone(e,s.id),onFocus:t[0]||(t[0]=(...e)=>r.removeErr&&r.removeErr(...e))},null,40,Ne),[[l,o.phoneMask]]),Ee])):(0,n.kq)("",!0),"email"===s.type?((0,n.wg)(),(0,n.iD)("label",Ue,[(0,n._)("input",{class:"variant-item__filed",value:s.answer,placeholder:o.emailPlaceholder,onInput:e=>r.emailCheck(e,s.id),onFocus:t[1]||(t[1]=(...e)=>r.removeErr&&r.removeErr(...e))},null,40,Ze),Qe])):(0,n.kq)("",!0),"text"===s.type?((0,n.wg)(),(0,n.iD)("label",He,[(0,n._)("input",{class:"variant-item__filed",value:s.answer,placeholder:o.textFieldPlaceholder,onInput:e=>r.textFieldCheck(e,s.id),onFocus:t[2]||(t[2]=(...e)=>r.removeErr&&r.removeErr(...e))},null,40,$e),Be])):(0,n.kq)("",!0),"textarea"===s.type?((0,n.wg)(),(0,n.iD)("label",We,[(0,n._)("textarea",{class:"variant-item__filed",value:s.answer,placeholder:o.textAreaPlaceholder,onInput:e=>r.textFieldCheck(e,s.id),onFocus:t[3]||(t[3]=(...e)=>r.removeErr&&r.removeErr(...e))},null,40,Ye),Re])):(0,n.kq)("",!0)],2)))),128)}var Ke=s(2566);function Je(e){const t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(String(e).toLowerCase())}var Xe={directives:{imask:Ke.An},props:{pollItemId:{type:String},optionsData:{type:Object}},data(){return{customFields:[],phoneMask:{mask:"+{7}(000)000-00-00",lazy:!1},emailPlaceholder:"example@mail.ru",textFieldPlaceholder:"Ваш ответ",textAreaPlaceholder:"Сообщение"}},computed:{...(0,E.rn)(["getValidate"]),...(0,E.Se)(["getCurrentAnswer"])},methods:{removeErr(e){e.target.closest(".error-field")},onAcceptPhone(e,t){const s=this.customFields.find((e=>e.id===t)),n=e.detail.value.trim();s.answer=n;const a=String(n).replace(/[^0-9]/g,"");a.length<11?s.filled=!1:s.filled=!0},emailCheck(e,t){const s=e.target.value.trim(),n=this.customFields.find((e=>e.id===t));n.answer=s,Je(s)?n.filled=!0:n.filled=!1},textFieldCheck(e,t){const s=e.target.value.trim(),n=this.customFields.find((e=>e.id===t));n.answer=s,s.length>0?n.filled=!0:n.filled=!1},...(0,E.OI)(["setUserAnswer","setCustomFildsValid"])},watch:{customFields:{handler(){const e=this.customFields.map((e=>e.filled)).every((e=>!0===e));e?this.setUserAnswer({questionId:this.pollItemId,userAnswer:[...this.customFields]}):this.setUserAnswer({questionId:this.pollItemId,userAnswer:[]})},deep:!0}},beforeMount(){this.getCurrentAnswer(this.pollItemId).length>0?this.customFields=[...this.getCurrentAnswer(this.pollItemId)]:this.customFields=this.optionsData.optionsList.map((e=>({id:e.id,type:e.type,value:e.value,answer:"",filled:!1})))}};const et=(0,V.Z)(Xe,[["render",Ge]]);var tt=et,st={components:{AppTextFromEditor:F,AppSingleChoiseVariant:Q,AppMultiChoiseVariant:G,AppSingleSelect:te,AppMultiSelect:ie,AppRangeSlider:ge,AppRangingVisual:Pe,AppDatapickerVisual:ze,AppCustomFieldsVisual:tt},props:{pollItemId:{type:[Number,String]},pollItemType:{type:String},pollItemData:{type:Object}},computed:{isHasImageInPoll(){const e=this.pollItemData.pollImage;return e&&0!==Object.keys(e).length},imagePositionType(){if(this.isHasImageInPoll)return this.pollItemData.pollImage.stretchImage?"_cover":"_contain"}}};const nt=(0,V.Z)(st,[["render",S]]);var at=nt,it={components:{AppVisualPollBody:at},props:{pollItemId:{type:[Number,String]},pollItemType:{type:String},pollItemName:{type:String},pollItemData:{type:Object},pollNumber:{type:Number}},data(){return{}},computed:{indexNumber(){return this.pollNumber+1},...(0,E.rn)(["getPageValidate"]),...(0,E.Se)(["questionIsHasAnswer"]),questionHasAnswer(){return this.questionIsHasAnswer(this.pollItemId)},showError(){return this.getPageValidate&&!this.questionHasAnswer}},methods:{}};const ot=(0,V.Z)(it,[["render",A]]);var rt=ot,lt={props:{pageData:{type:Object}},components:{AppPollElement:rt},computed:{...(0,E.rn)({userAnswers:e=>e.userAnswers}),pagePollList(){return this.pageData.pollList},pageIsBlocked(){return this.userAnswers.find((e=>e.pageId===this.pageData.id)).pageIsBlocked}}};const pt=(0,V.Z)(lt,[["render",I]]);var dt=pt;const ct={class:"quiz-start"},ut={class:"quiz-start__head"},gt={key:0,class:"quiz-start__logo"},mt=["src"],ht={class:"quiz-start__title"},wt={class:"quiz-start__descr"};function It(e,t,s,a,o,r){return(0,n.wg)(),(0,n.iD)("div",ct,[(0,n._)("div",ut,[r.appLogo?((0,n.wg)(),(0,n.iD)("div",gt,[(0,n._)("img",{style:(0,i.j5)({objectFit:r.stretchAppLogo}),src:r.appLogo,alt:""},null,12,mt)])):(0,n.kq)("",!0),(0,n._)("div",ht,(0,i.zw)(r.appTitle),1)]),(0,n._)("div",wt,(0,i.zw)(r.appDescription),1)])}var vt={props:{appSettings:{type:Object}},computed:{appLogo(){const e=this.appSettings.appLogo.path;return e||!1},stretchAppLogo(){return this.appSettings.appLogo.stretchImage&&1==this.appSettings.appLogo.stretchImage?"cover":"contain"},appTitle(){return this.appSettings.appTitle},appDescription(){return this.appSettings.appDescription}},methods:{startQuiz(){this.$store.commit("setStartTime"),this.$emit("startQuiz");const e=document.querySelector("#app").dataset.pollId,t=document.querySelector("#app").dataset.user;h.Z.post("/bitrix/templates/quiz/startitem.php",{id:e,user:t},{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){console.log("Начало прохождения викторины!")})).catch((function(e){console.log("Ошибка:",e)}))}}};const ft=(0,V.Z)(vt,[["render",It]]);var yt=ft;const Dt={class:"quiz-end"},bt={key:0,class:"quiz-end-precent"},_t={class:"quiz-end-precent__img"},At=(0,n.uE)('<svg width="204" height="203" viewBox="0 0 204 203" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="102.5" cy="102" r="92" fill="var(--app-color)"></circle><path d="M194.5 102C194.5 89.9184 192.12 77.9551 187.497 66.7931C182.873 55.6312 176.097 45.4892 167.554 36.9462C159.011 28.4032 148.869 21.6265 137.707 17.0031C126.545 12.3796 114.582 10 102.5 10L102.5 102H194.5Z" fill="url(#paint0_linear_1181_55336)"></path><path d="M10.4996 102L102.5 194L194.5 102L10.4996 102Z" fill="url(#paint1_linear_1181_55336)"></path><defs><linearGradient id="paint0_linear_1181_55336" x1="-10.7307" y1="-53.532" x2="253.033" y2="-20.3577" gradientUnits="userSpaceOnUse"><stop offset="0.0261371" stop-color="white" stop-opacity="0.81"></stop><stop offset="1" stop-color="white" stop-opacity="0"></stop></linearGradient><linearGradient id="paint1_linear_1181_55336" x1="72.3191" y1="119.942" x2="219.688" y2="75.4972" gradientUnits="userSpaceOnUse"><stop stop-color="white" stop-opacity="0"></stop><stop offset="1" stop-color="white"></stop></linearGradient></defs></svg>',1),Ct={class:"quiz-end-precent__value"},kt=(0,n._)("div",{class:"quiz-end-precent__title"},"Правильных ответов",-1),Lt={key:1,class:"quiz-end-message"},St={class:"quiz-end-btns"},Ot={key:0,class:"quiz-end-btn"},xt=["href"],Pt={key:1,class:"quiz-end-btn"};function qt(e,t,s,a,o,r){return(0,n.wg)(),(0,n.iD)("div",Dt,[r.appHasCurrentAnswers?((0,n.wg)(),(0,n.iD)("div",bt,[(0,n._)("div",_t,[At,(0,n._)("div",Ct,(0,i.zw)(r.truePrecentValue)+"%",1)]),kt])):(0,n.kq)("",!0),r.isHasAppFinalMessage?((0,n.wg)(),(0,n.iD)("div",Lt,(0,i.zw)(s.appSettings.appFinalMessage),1)):(0,n.kq)("",!0),(0,n._)("div",St,[r.isHasCustomLink?((0,n.wg)(),(0,n.iD)("div",Ot,[(0,n._)("a",{href:r.customFinishLinkUrl,class:"btn app-btn"},(0,i.zw)(r.customFinishLinkText),9,xt)])):(0,n.kq)("",!0),r.takeTheQuizagain?((0,n.wg)(),(0,n.iD)("div",Pt,[(0,n._)("a",{href:"#",class:"btn app-btn",onClick:t[0]||(t[0]=(...e)=>r.pageReload&&r.pageReload(...e))},"Пройти опрос повторно")])):(0,n.kq)("",!0)])])}function Vt(e,t){const s=e.filter((e=>t.includes(e)));return s.length>t.length/2}function Tt(e,t){const s=Math.min(e.length,t.length),n=e.slice(0,s).filter(((e,s)=>e===t[s]));return n.length>s/2}function Ft(e){const t=e.reduce(((e,t)=>e+ +t),0),s=e.length;return Math.round(t/s*100)}var zt={props:{appSettings:{type:Object}},computed:{...(0,E.rn)({userAnswers:e=>e.userAnswers}),isHasAppFinalMessage(){return""!=this.appSettings.appFinalMessage.trim()},isHasCustomLink(){return this.appSettings.customFinishLink.enable},customFinishLinkUrl(){return this.appSettings.customFinishLink.data.linkUrl},customFinishLinkText(){return this.appSettings.customFinishLink.data.linkText},takeTheQuizagain(){return this.appSettings.takeTheQuizagain},appHasCurrentAnswers(){const e=this.userAnswers.find((e=>e.pageData.find((e=>e.correctAnswer.length>0))));return e},truePrecentValue(){const e=this.userAnswers.reduce(((e,t)=>(e.push(...t.pageData),e)),[]),t=e.filter((e=>e.hasOwnProperty("correctAnswer")&&e.correctAnswer.length>0)).map((e=>"single-choice"==e.questionType||"drop-down-list"==e.questionType?e.userAnswer[0]==e.correctAnswer[0]:"multiple-drop-down-list"==e.questionType||"multiple-choice"==e.questionType?Vt(e.userAnswer,e.correctAnswer):"ranging"==e.questionType?Tt(e.userAnswer,e.correctAnswer):void 0));return Ft(t)}},methods:{pageReload(){window.location.reload()}}};const jt=(0,V.Z)(zt,[["render",qt]]);var Mt=jt,Nt={components:{AppSurveyPage:dt,AppStartPage:yt,AppEndPage:Mt},name:"App",data(){return{showQuestions:!0,showEndPage:!1}},computed:{...(0,E.rn)({appDataLoaded:e=>e.appDataLoaded,surveyQuestionsPages:e=>e.surveyQuestionsPages,appSettings:e=>e.appSettings,userAnswers:e=>e.userAnswers,"surveyСompleted":e=>e.surveyCompleted}),...(0,E.Se)(["getCurrentPage"]),isLastPage(){return this.surveyQuestionsPages[this.surveyQuestionsPages.length-1].id===this.getCurrentPage.id},nextBtnText(){return this.isLastPage?"Завершить опрос":"Далее"}},methods:{...(0,E.OI)(["togglePageValidate","toggleCustomFieldsValidate","blockedPage","setCurrentPageId","compliteSurvey","setShowCurrentAnswer"]),setPage(e){this.surveyСompleted&&(this.showQuestions=!0,this.showEndPage=!1,this.setCurrentPageId(e))},selectEndPage(){this.showQuestions=!1,this.showEndPage=!0},nextPageOrFinish(){const e=this.getCurrentPage.id;this.togglePageValidate(!0),this.toggleCustomFieldsValidate(!0);const t=this.userAnswers.find((t=>t.pageId===e)),s=t.pageData.every((e=>e.userAnswer.length>0));if(s){const t=this.surveyQuestionsPages.findIndex((t=>t.id===e)),s=this.surveyQuestionsPages[t+1];this.togglePageValidate(!1),this.toggleCustomFieldsValidate(!1),this.blockedPage({pageId:e,value:!0}),s?this.setCurrentPageId(s.id):(this.compliteSurvey(),this.showQuestions=!1,this.showEndPage=!0,this.setShowCurrentAnswer(!0),this.$store.dispatch("setAppDataOnServer")),window.scrollTo({top:0,behavior:"smooth"})}else(0,n.Y3)().then((()=>{const e=document.querySelectorAll(".poll-item.questionEmptyAnswer");e.length>0&&e[0].scrollIntoView({behavior:"smooth",block:"center"})}))}},beforeCreate(){this.$store.dispatch("getAppDataFromServer").then((e=>{})).catch((e=>{console.log("Ошибка:",e)}));const e=t=>{if(t.target.closest(".poll-item")){this.$store.commit("setStartTime");const t=document.querySelector("#app").dataset.pollId,s=document.querySelector("#app").dataset.user;h.Z.post("/bitrix/templates/quiz/startitem.php",{id:t,user:s},{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){console.log("Начало прохождения!"),document.removeEventListener("click",e)})).catch((function(e){console.log("Ошибка:",e)}))}};document.addEventListener("click",e)}};const Et=(0,V.Z)(Nt,[["render",m]]);var Ut=Et;const Zt={resState:'{"appId":"137","appType":"survey","applicationReady":false,"pollTypesList":[],"currentPageId":"1","pagesLimit":5,"pollsInPageLimit":10,"pagesMinLength":1,"colors":[],"textColors":[{"name":"Белый","value":"#FFFFFF"},{"name":"Чёрный","value":"#000000"}],"appSettings":{"appTitle":"Тестовый опрос для создания json","appDescription":"Товарищи! сложившаяся структура организации способствует подготовки и реализации новых предложений. Не следует, однако забывать, что рамки и место обучения кадров требуют от нас анализа системы обучения кадров, соответствует насущным потребностям. Товарищи! новая модель организационной деятельности требуют определения и уточнения позиций, занимаемых участниками в отношении поставленных задач.","appPromo":"","appFinalMessage":"Таким образом постоянный количественный рост и сфера нашей активности играет важную роль в формировании соответствующий условий активизации. Таким образом постоянный количественный рост и сфера нашей активности обеспечивает широкому кругу (специалистов) участие в формировании систем массового участия. С другой стороны укрепление и развитие структуры обеспечивает широкому кругу (специалистов) участие в формировании новых предложений.","hasCorrectAnswers":true,"takeTheQuizagain":false,"customFinishLink":{"enable":false,"data":{"linkText":"","linkUrl":""}},"appColor":{"name":"Фиолетовый","value":"#7213EA"},"appTextColor":{"name":"Белый","value":"#FFFFFF"},"appLogo":{"name":"png-transparent-rick-and-morty-illustratrion-rick-sanchez-morty-smith-rick-and-morty-season-1-television-show-youtube-rick-and-morty-television-logo-computer-wallpaper-thumbnail.png","path":"https://dev.vnutricom.ru/upload/tmp/poll/914/sgfh1ezrw377ym4fedqc49i4gi52x006.png"},"appQuizBg":{}},"pollPages":[{"id":"1","pageComment":"Короткое текстовое описание для страницы №1","pollList":[{"type":"single-choice","typeName":"Одиночный выбор","typeDescr":"Описание для элемента опроса Одиночный выбор","data":{"pollImage":{"name":"e0d8ecddbdc26c17db17a7b65bc00353.jpg","path":"https://dev.vnutricom.ru/upload/tmp/poll/754/33nwhq6nf39su0egqj6vk5uofdkfv59u.jpg","stretchImage":true},"editorValue":{"ops":[{"insert":"Одиночный выбор. Правильно ответа нет\\n"}]},"optionsData":{"minOptionsLength":2,"maxOptionsLength":10,"currentAnswerId":[],"optionsList":[{"id":"1","value":"вариант 1"},{"id":"2","value":"вариант 2"},{"id":"ae156fad-626d-4485-8931-0f850c825541","value":"вариант 3"}]}},"id":"d68e75ce-6a87-422e-9c41-b8f15c53591b"},{"type":"single-choice","typeName":"Одиночный выбор","typeDescr":"Описание для элемента опроса Одиночный выбор","data":{"pollImage":{"name":"e0d8ecddbdc26c17db17a7b65bc00353.jpg","path":"https://dev.vnutricom.ru/upload/tmp/poll/754/33nwhq6nf39su0egqj6vk5uofdkfv59u.jpg","stretchImage":true},"editorValue":{"ops":[{"insert":"Одиночный выбор. Правильный ответ 3\\n"}]},"optionsData":{"minOptionsLength":2,"maxOptionsLength":10,"currentAnswerId":["ed54a274-cf06-4c20-8b3d-2d161afa10f9"],"optionsList":[{"id":"1","value":"вариант 1"},{"id":"2","value":"вариант 2"},{"id":"ed54a274-cf06-4c20-8b3d-2d161afa10f9","value":"вариант 3"}]}},"id":"ef63b320-4fdb-4f3f-8047-e453a0a06882"},{"type":"drop-down-list","typeName":"Выпадающий список","typeDescr":"Описание для элемента опроса Выпадающий список","data":{"pollImage":{"name":"e0d8ecddbdc26c17db17a7b65bc00353.jpg","path":"https://dev.vnutricom.ru/upload/tmp/poll/754/33nwhq6nf39su0egqj6vk5uofdkfv59u.jpg"},"editorValue":{"ops":[{"insert":"Выпадающий список. Правильно ответа "},{"attributes":{"bold":true},"insert":"нет"},{"insert":"\\n\\n"}]},"optionsData":{"minOptionsLength":2,"maxOptionsLength":10,"currentAnswerId":[],"optionsList":[{"id":"1","value":"Вариант 1"},{"id":"2","value":"Вариант 2"},{"id":"f2c71db3-a8d7-4c68-80c8-e42dfd8f3a9c","value":"Вариант 3"}]}},"id":"b71f785d-7e51-4e7e-b1e5-d4404344c02a"},{"type":"drop-down-list","typeName":"Выпадающий список","typeDescr":"Описание для элемента опроса Выпадающий список","data":{"pollImage":{},"editorValue":{"ops":[{"insert":"Выпадающий список. Правильный ответ 1\\n\\n"}]},"optionsData":{"minOptionsLength":2,"maxOptionsLength":10,"currentAnswerId":["1"],"optionsList":[{"id":"1","value":"Вариант 1"},{"id":"2","value":"Вариант 2"},{"id":"6dead37f-b9de-49b8-8248-36810be7b415","value":"Вариант 3"}]}},"id":"a2317fb0-dcd1-4501-a16e-1798144d1ed4"},{"type":"multiple-drop-down-list","typeName":"Множественный вып. список","typeDescr":"Описание для элемента опроса Множественный вып. список","data":{"pollImage":{},"editorValue":{"ops":[{"insert":"Множественный вып. список. Правильно ответа "},{"attributes":{"bold":true},"insert":"нет"},{"insert":"\\n\\n"}]},"optionsData":{"minOptionsLength":2,"maxOptionsLength":10,"currentAnswerId":[],"optionsList":[{"id":"1","value":"Вариант 1"},{"id":"2","value":"Вариант 2"},{"id":"16b4debc-0706-4e8e-8e3a-4701295b5e72","value":"Вариант 3"}]}},"id":"e12297a9-00ea-44ea-b743-34149f9d6d10"},{"type":"multiple-drop-down-list","typeName":"Множественный вып. список","typeDescr":"Описание для элемента опроса Множественный вып. список","data":{"pollImage":{},"editorValue":{"ops":[{"insert":"Множественный вып. список. Правильный ответ 2\\n\\n"}]},"optionsData":{"minOptionsLength":2,"maxOptionsLength":10,"currentAnswerId":["2"],"optionsList":[{"id":"1","value":"Вариант 1"},{"id":"2","value":"Вариант 2"},{"id":"8b9c4d8f-03e7-4479-919c-243b2d80556b","value":"Вариант 3"}]}},"id":"e6d0db49-1c9e-4d33-a640-4207a304798f"},{"type":"multiple-choice","typeName":"Множественный выбор","typeDescr":"Описание для элемента опроса Множественный выбор","data":{"pollImage":{},"editorValue":{"ops":[{"insert":"Множественный выбор. Правильно ответа "},{"attributes":{"bold":true},"insert":"нет"},{"insert":"\\n"}]},"optionsData":{"minOptionsLength":2,"maxOptionsLength":10,"currentAnswerId":[],"optionsList":[{"id":"1","value":"Вариант 1"},{"id":"2","value":"Вариант 2"},{"id":"67a09e24-f800-4344-8c59-1e10e8087feb","value":"Вариант 3"}]}},"id":"980c54bf-414d-443b-904e-f926622278e0"},{"type":"multiple-choice","typeName":"Множественный выбор","typeDescr":"Описание для элемента опроса Множественный выбор","data":{"pollImage":{},"editorValue":{"ops":[{"insert":"Множественный выбор. Правильный ответ 1 и 3\\n"}]},"optionsData":{"minOptionsLength":2,"maxOptionsLength":10,"currentAnswerId":["82312c00-162a-41a3-8cc8-620c67ac49ce","1"],"optionsList":[{"id":"1","value":"Вариант 1"},{"id":"2","value":"Вариант 2"},{"id":"82312c00-162a-41a3-8cc8-620c67ac49ce","value":"Вариант 3"},{"id":"357f492c-088e-47ef-9c5a-3e823517ef26","value":"Вариант 4"}]}},"id":"8f5a3507-2b2a-448e-bd41-876dc9e94230"},{"type":"ranging","typeName":"Ранжирование","typeDescr":"Описание для элемента опроса Ранжирование","data":{"pollImage":{},"editorValue":{"ops":[{"insert":"Ранжирование\\n"}]},"optionsData":{"minOptionsLength":2,"maxOptionsLength":10,"currentAnswerId":[],"optionsList":[{"id":"1","value":"вариант 1"},{"id":"2","value":"вариант 2"},{"id":"178cac30-93b3-4f54-a7e6-36761c7c69d4","value":"вариант 3"},{"id":"4c9d1df3-6889-45a6-a1be-0754200986fa","value":"вариант 4"}]}},"id":"e324cdd7-6302-4107-9560-ce18170e48e0"},{"type":"range-selection","typeName":"Выбор диапазона","typeDescr":"Описание для элемента опроса Выбор диапазона","data":{"pollImage":{},"editorValue":{"ops":[{"insert":"Выбор диапазона от 10 до 100\\n"}]},"rangeData":{"min":0,"max":3,"defaultMin":"1","defaultMax":"2"}},"id":"2ee0d481-b4e3-4b46-9cc4-396aec07f623"}]},{"id":"page-31f0ca7c-ff91-48d9-a30c-b45a9db92b4d","pageComment":"Короткое текстовое описание для страницы №2","pollList":[{"type":"date","typeName":"Дата","typeDescr":"Описание для элемента опроса Дата","data":{"pollImage":{},"editorValue":{"ops":[{"insert":"Дата, одиночный выбор даты\\n"}]},"dateData":{"range":false}},"id":"ff253159-71c9-4f7f-9fbe-1d0bfa274187"},{"type":"date","typeName":"Дата","typeDescr":"Описание для элемента опроса Дата","data":{"pollImage":{},"editorValue":{"ops":[{"insert":"Дата, диапазон выбора даты\\n"}]},"dateData":{"range":true}},"id":"154b9514-3ccb-4d7e-bc9f-a457c79bead5"},{"type":"custom-fields","typeName":"Кастомные поля","typeDescr":"Описание для элемента опроса Кастомные поля","data":{"pollImage":{},"editorValue":{"ops":[{"insert":"Кастомные поля, Имя\\n\\n"}]},"optionsData":{"minOptionsLength":1,"maxOptionsLength":10,"optionsList":[{"id":"1","type":"text","value":"Имя"}]}},"id":"bbf085fc-1f1c-4caf-acbb-a04373143f2b"},{"type":"custom-fields","typeName":"Кастомные поля","typeDescr":"Описание для элемента опроса Кастомные поля","data":{"pollImage":{},"editorValue":{"ops":[{"insert":"Кастомные поля, "},{"attributes":{"color":"#262b31"},"insert":"Телефон"},{"insert":"\\n\\n\\n"}]},"optionsData":{"minOptionsLength":1,"maxOptionsLength":10,"optionsList":[{"id":"1","type":"phone","value":"Телефон"}]}},"id":"620d7ac1-c730-417d-b512-33023ce264f4"},{"type":"custom-fields","typeName":"Кастомные поля","typeDescr":"Описание для элемента опроса Кастомные поля","data":{"pollImage":{},"editorValue":{"ops":[{"insert":"Кастомные поля, "},{"attributes":{"color":"#262b31"},"insert":"Email"},{"insert":"\\n"}]},"optionsData":{"minOptionsLength":1,"maxOptionsLength":10,"optionsList":[{"id":"1","type":"email","value":"Email"}]}},"id":"b735f5a8-2f1a-4e72-9e0a-7ca0820980c6"},{"type":"custom-fields","typeName":"Кастомные поля","typeDescr":"Описание для элемента опроса Кастомные поля","data":{"pollImage":{},"editorValue":{"ops":[{"insert":"Кастомные поля, "},{"attributes":{"color":"#262b31"},"insert":"Область текста"},{"insert":"\\n"}]},"optionsData":{"minOptionsLength":1,"maxOptionsLength":10,"optionsList":[{"id":"1","type":"textarea","value":"Область текста"}]}},"id":"a825c314-a094-4c10-9b0a-7f9300ac7ea9"},{"type":"custom-fields","typeName":"Кастомные поля","typeDescr":"Описание для элемента опроса Кастомные поля","data":{"pollImage":{},"editorValue":{"ops":[{"insert":"Кастомные поля, Всё сразу\\n"}]},"optionsData":{"minOptionsLength":1,"maxOptionsLength":10,"optionsList":[{"id":"1","type":"text","value":"Имя"},{"id":"8884faa5-c24b-480b-b81e-b898a44426ca","type":"phone","value":"Телефон"},{"id":"9e8c4c89-4496-414a-8c8c-a8538a096ef6","type":"email","value":"Email"},{"id":"d5442472-aaf4-49be-bd7d-eb3e6e149de5","type":"textarea","value":"Сообщение"}]}},"id":"e969b6aa-3c39-488b-a991-ef4d5744649f"}]}]}'};var Qt=Zt;const Ht=document.querySelector("#app").dataset.pollId,$t=document.querySelector("#app").dataset.user;var Bt=(0,E.MT)({state:{appDataLoaded:!1,showCurrentAnswer:!1,getValidate:!1,getPageValidate:!1,surveyQuestionsPages:[],currentPadeId:"",appSettings:{},userAnswers:[],startTime:0,surveyCompleted:!1},getters:{getCurrentPage:e=>e.surveyQuestionsPages.find((t=>t.id===e.currentPadeId)),getCurrentAnswer:e=>t=>{const s=e.userAnswers.find((e=>e.pageData.find((e=>e.questionId===t)))),n=s.pageData.find((e=>e.questionId===t));return n.userAnswer},questionIsHasAnswer:e=>t=>{const s=e.userAnswers.find((e=>e.pageData.find((e=>e.questionId===t)))),n=s.pageData.find((e=>e.questionId===t));return n.userAnswer.length>0}},mutations:{setStartTime(e){e.startTime=new Date},setSurveyQuestionsData(e,t){e.surveyQuestionsPages=t,e.currentPadeId=e.surveyQuestionsPages[0].id;const s=t.map((e=>{const t=e.pollList.map((e=>{const t=e.data.hasOwnProperty("optionsData")&&e.data.optionsData.hasOwnProperty("currentAnswerId")&&e.data.optionsData.currentAnswerId.length>0;let s=t?e.data.optionsData.currentAnswerId:[],n=e.data.hasOwnProperty("optionsData")?e.data.optionsData.optionsList:[];return"ranging"===e.type&&(s=e.data.optionsData.optionsList.map((e=>e.id))),{questionType:e.type,questionId:e.id,optionsList:n,correctAnswer:s,userAnswer:[]}}));return{pageId:e.id,pageIsBlocked:!1,pageData:t}}));e.userAnswers=s},setSurveyAppSettings(e,t){e.appSettings=t,document.body.style.setProperty("--app-color",e.appSettings.appColor.value),document.body.style.setProperty("--app-text-color",e.appSettings.appTextColor.value),e.appDataLoaded=!0},setUserAnswer(e,{questionId:t,userAnswer:s}){if(e.surveyCompleted)return;const n=e.userAnswers.find((e=>e.pageData.find((e=>e.questionId===t))));if(n.pageIsBlocked)return;const a=n.pageData.find((e=>e.questionId===t));a.userAnswer="string"==typeof s?[s]:[...s]},togglePageValidate(e,t){e.getPageValidate=t},toggleCustomFieldsValidate(e,t){e.getValidate=t},blockedPage(e,{pageId:t,value:s}){e.userAnswers.find((e=>e.pageId===t)).pageIsBlocked=s},setCurrentPageId(e,t){e.currentPadeId=t},compliteSurvey(e){e.surveyCompleted=!0},setShowCurrentAnswer(e,t){e.showCurrentAnswer=t}},actions:{getAppDataFromServer({commit:e}){return new Promise(((t,s)=>{h.Z.get("/bitrix/templates/quiz/itemjson.php",{params:{id:Ht,type:"quiz"}}).then((function(s){const n=JSON.parse(s.data.resState),a=n.pollPages;e("setSurveyQuestionsData",a);const i=n.appSettings;e("setSurveyAppSettings",i),t(s)})).catch((function(t){const n=JSON.parse(Qt.resState),a=n.pollPages;e("setSurveyQuestionsData",a);const i=n.appSettings;e("setSurveyAppSettings",i),s(t)}))}))},setAppDataOnServer({state:e}){return new Promise(((t,s)=>{const n={};n.informationAboutPassage=JSON.parse(JSON.stringify(e.userAnswers)),n.completionTimeInMilliseconds=new Date-e.startTime,h.Z.post("/bitrix/templates/quiz/resultjson.php",{id:Ht,user:$t,json:n},{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){console.log(e),t(e)})).catch((function(e){console.log(e),s(e)}))}))}}}),Wt=s(3636);Wt.Z.props.components.default=()=>({OpenIndicator:{render:()=>(0,n.h)("span",{class:{"toggle-arrow":!0}})},Deselect:{render:()=>(0,n.h)("span",{class:{"deselect-btn":!0},title:""})}});(0,a.ri)(Ut).component("vSelect",Wt.Z).use(Bt).mount("#app")}},t={};function s(n){var a=t[n];if(void 0!==a)return a.exports;var i=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(i.exports,i,i.exports,s),i.loaded=!0,i.exports}s.m=e,function(){var e=[];s.O=function(t,n,a,i){if(!n){var o=1/0;for(d=0;d<e.length;d++){n=e[d][0],a=e[d][1],i=e[d][2];for(var r=!0,l=0;l<n.length;l++)(!1&i||o>=i)&&Object.keys(s.O).every((function(e){return s.O[e](n[l])}))?n.splice(l--,1):(r=!1,i<o&&(o=i));if(r){e.splice(d--,1);var p=a();void 0!==p&&(t=p)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[n,a,i]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,i,o=n[0],r=n[1],l=n[2],p=0;if(o.some((function(t){return 0!==e[t]}))){for(a in r)s.o(r,a)&&(s.m[a]=r[a]);if(l)var d=l(s)}for(t&&t(n);p<o.length;p++)i=o[p],s.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return s.O(d)},n=self["webpackChunksurvey_constructor"]=self["webpackChunksurvey_constructor"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=s.O(void 0,[998],(function(){return s(3919)}));n=s.O(n)})();